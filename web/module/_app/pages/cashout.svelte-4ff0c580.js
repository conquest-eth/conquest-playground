import{S as st,i as lt,s as it,d as h,O as C,P as E,v as ut,ar as M,a5 as H,e as g,z as P,n as W,c as y,f as A,A as D,q as G,g as _,j as B,h as $,k,B as I,L as w,x as T,u as j,E as q,as as J,t as R,l as S,r as rt,w as ft,at as K,M as mt,m as pt,N as V}from"../chunks/vendor-e78c39f1.js";import{P as Y}from"../chunks/PanelButton-b24a8fdb.js";import{N as Q}from"../chunks/NavButton-b22b61c0.js";import{W as X}from"../chunks/WalletAccess-ec429ef9.js";import{w as v,b as z}from"../chunks/wallet-c826be1b.js";import{b as Z}from"../chunks/paths-28a87002.js";import{p as O}from"../chunks/privateWallet-7a0cfca0.js";import{m as L}from"../chunks/token-c96bed7f.js";import"../chunks/config-af7f3a10.js";import"../chunks/contracts-69d01f63.js";import"../chunks/Modal-a8884379.js";import"../chunks/spaceInfo-b394211b.js";import"../chunks/base-652be6d9.js";import"../chunks/account-c0a26acd.js";import"../chunks/optimisticSpace-8b3fc51e.js";import"../chunks/subgraph-aa394bde.js";import"../chunks/graphql-582eebcc.js";const N="src/routes/cashout.svelte";function x(c){let t;const e={c:function(){t=R("Back To Game")},l:function(o){t=S(o,"Back To Game")},m:function(o,s){k(o,t,s)},d:function(o){o&&_(t)}};return h("SvelteRegisterBlock",{block:e,id:x.name,type:"slot",source:'(29:2) <NavButton label=\\"Back To Game\\" href={`${base}/`}>',ctx:c}),e}function tt(c){let t,e,n=M(c[1].playTokenBalance)+"",o,s,l=c[1].playTokenBalance.gt(0),r,m,i,a=l&&U(c);m=new Y({props:{class:"block w-max-content m-4",label:"cashout",disabled:c[1].playTokenBalance.lte(0),$$slots:{default:[ot]},$$scope:{ctx:c}},$$inline:!0}),m.$on("click",c[8]);const f={c:function(){t=g("p"),e=R("Amount available: "),o=R(n),s=W(),a&&a.c(),r=W(),P(m.$$.fragment),this.h()},l:function(u){t=y(u,"P",{class:!0});var d=A(t);e=S(d,"Amount available: "),o=S(d,n),d.forEach(_),s=G(u),a&&a.l(u),r=G(u),D(m.$$.fragment,u),this.h()},h:function(){$(t,"class","m-2 text-center"),B(t,N,47,8,1713)},m:function(u,d){k(u,t,d),w(t,e),w(t,o),k(u,s,d),a&&a.m(u,d),k(u,r,d),I(m,u,d),i=!0},p:function(u,d){(!i||d&2)&&n!==(n=M(u[1].playTokenBalance)+"")&&pt(o,n),d&2&&(l=u[1].playTokenBalance.gt(0)),l?a?a.p(u,d):(a=U(u),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null);const p={};d&2&&(p.disabled=u[1].playTokenBalance.lte(0)),d&512&&(p.$$scope={dirty:d,ctx:u}),m.$set(p)},i:function(u){i||(T(m.$$.fragment,u),i=!0)},o:function(u){j(m.$$.fragment,u),i=!1},d:function(u){u&&_(t),u&&_(s),a&&a.d(u),u&&_(r),q(m,u)}};return h("SvelteRegisterBlock",{block:f,id:tt.name,type:"else",source:"(47:6) {:else}",ctx:c}),f}function et(c){let t,e;const n={c:function(){t=g("p"),e=R("Please wait..."),this.h()},l:function(s){t=y(s,"P",{});var l=A(t);e=S(l,"Please wait..."),l.forEach(_),this.h()},h:function(){B(t,N,43,8,1571)},m:function(s,l){k(s,t,l),w(t,e)},p:V,i:V,o:V,d:function(s){s&&_(t)}};return h("SvelteRegisterBlock",{block:n,id:et.name,type:"if",source:"(43:44) ",ctx:c}),n}function nt(c){let t,e;t=new Y({props:{class:"w-max-content m-4",label:"connect",disabled:!c[3].available||c[4].connecting,$$slots:{default:[at]},$$scope:{ctx:c}},$$inline:!0}),t.$on("click",c[6]);const n={c:function(){P(t.$$.fragment)},l:function(s){D(t.$$.fragment,s)},m:function(s,l){I(t,s,l),e=!0},p:function(s,l){const r={};l&24&&(r.disabled=!s[3].available||s[4].connecting),l&512&&(r.$$scope={dirty:l,ctx:s}),t.$set(r)},i:function(s){e||(T(t.$$.fragment,s),e=!0)},o:function(s){j(t.$$.fragment,s),e=!1},d:function(s){q(t,s)}};return h("SvelteRegisterBlock",{block:n,id:nt.name,type:"if",source:"(34:6) {#if $privateWallet.step !== 'READY'}",ctx:c}),n}function U(c){let t,e,n,o;const s={c:function(){t=g("input"),this.h()},l:function(r){t=y(r,"INPUT",{step:!0,max:!0,class:!0,type:!0}),this.h()},h:function(){$(t,"step","0.1"),$(t,"max",e=c[1].playTokenBalance.div("100000000000000000").toNumber()/10),$(t,"class","bg-black"),$(t,"type","number"),B(t,N,52,10,1882)},m:function(r,m){k(r,t,m),K(t,c[0]),n||(o=mt(t,"input",c[7]),n=!0)},p:function(r,m){m&2&&e!==(e=r[1].playTokenBalance.div("100000000000000000").toNumber()/10)&&$(t,"max",e),m&1&&J(t.value)!==r[0]&&K(t,r[0])},d:function(r){r&&_(t),n=!1,o()}};return h("SvelteRegisterBlock",{block:s,id:U.name,type:"if",source:"(52:8) {#if $myTokens.playTokenBalance.gt(0)}",ctx:c}),s}function ot(c){let t;const e={c:function(){t=R("Cash out")},l:function(o){t=S(o,"Cash out")},m:function(o,s){k(o,t,s)},d:function(o){o&&_(t)}};return h("SvelteRegisterBlock",{block:e,id:ot.name,type:"slot",source:'(61:8) <Button           class=\\"block w-max-content m-4\\"           label=\\"cashout\\"           disabled={$myTokens.playTokenBalance.lte(0)}           on:click={() => cashout(amount)}         >',ctx:c}),e}function at(c){let t;const e={c:function(){t=R("Connect")},l:function(o){t=S(o,"Connect")},m:function(o,s){k(o,t,s)},d:function(o){o&&_(t)}};return h("SvelteRegisterBlock",{block:e,id:at.name,type:"slot",source:'(35:8) <Button           class=\\"w-max-content m-4\\"           label=\\"connect\\"           disabled={!$builtin.available || $wallet.connecting}           on:click={() => privateWallet.login()}         >',ctx:c}),e}function ct(c){let t,e,n,o;const s=[nt,et,tt],l=[];function r(i,a){return i[2].step!=="READY"?0:i[1].playTokenBalance?2:1}e=r(c),n=l[e]=s[e](c);const m={c:function(){t=g("div"),n.c(),this.h()},l:function(a){t=y(a,"DIV",{class:!0});var f=A(t);n.l(f),f.forEach(_),this.h()},h:function(){$(t,"class","text-cyan-300 text-center"),B(t,N,32,4,1198)},m:function(a,f){k(a,t,f),l[e].m(t,null),o=!0},p:function(a,f){let b=e;e=r(a),e===b?l[e].p(a,f):(rt(),j(l[b],1,1,()=>{l[b]=null}),ft(),n=l[e],n?n.p(a,f):(n=l[e]=s[e](a),n.c()),T(n,1),n.m(t,null))},i:function(a){o||(T(n),o=!0)},o:function(a){j(n),o=!1},d:function(a){a&&_(t),l[e].d()}};return h("SvelteRegisterBlock",{block:m,id:ct.name,type:"slot",source:"(32:2) <WalletAccess>",ctx:c}),m}function F(c){let t,e,n,o,s,l,r;e=new Q({props:{label:"Back To Game",href:`${Z}/`,$$slots:{default:[x]},$$scope:{ctx:c}},$$inline:!0}),l=new X({props:{$$slots:{default:[ct]},$$scope:{ctx:c}},$$inline:!0});const m={c:function(){t=g("div"),P(e.$$.fragment),n=W(),o=g("br"),s=W(),P(l.$$.fragment),this.h()},l:function(a){t=y(a,"DIV",{class:!0});var f=A(t);D(e.$$.fragment,f),n=G(f),o=y(f,"BR",{}),s=G(f),D(l.$$.fragment,f),f.forEach(_),this.h()},h:function(){B(o,N,30,2,1170),$(t,"class","w-full h-full bg-black"),B(t,N,27,0,1053)},m:function(a,f){k(a,t,f),I(e,t,null),w(t,n),w(t,o),w(t,s),I(l,t,null),r=!0},p:function(a,[f]){const b={};f&512&&(b.$$scope={dirty:f,ctx:a}),e.$set(b);const u={};f&543&&(u.$$scope={dirty:f,ctx:a}),l.$set(u)},i:function(a){r||(T(e.$$.fragment,a),T(l.$$.fragment,a),r=!0)},o:function(a){j(e.$$.fragment,a),j(l.$$.fragment,a),r=!1},d:function(a){a&&_(t),q(e),q(l)}};return h("SvelteRegisterBlock",{block:m,id:F.name,type:"component",source:"",ctx:c}),m}function dt(c,t,e){let n,o,s,l;C(L,"myTokens"),E(c,L,p=>e(1,n=p)),C(O,"privateWallet"),E(c,O,p=>e(2,o=p)),C(z,"builtin"),E(c,z,p=>e(3,s=p)),C(v,"wallet"),E(c,v,p=>e(4,l=p));let{$$slots:r={},$$scope:m}=t;ut("Cashout",r,[]);let i;async function a(p){if(v.address&&v.contracts)await v.contracts.PlayToken.burn(v.address,H.from(p*10).mul("100000000000000000"));else throw new Error(" not wallet or contracts")}const f=[];Object.keys(t).forEach(p=>{!~f.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Cashout> was created with unknown prop '${p}'`)});const b=()=>O.login();function u(){i=J(this.value),e(0,i),e(1,n)}const d=()=>a(i);return c.$capture_state=()=>({Button:Y,NavButton:Q,WalletAccess:X,wallet:v,builtin:z,base:Z,privateWallet:O,myTokens:L,formatEther:M,BigNumber:H,amount:i,cashout:a,$myTokens:n,$privateWallet:o,$builtin:s,$wallet:l}),c.$inject_state=p=>{"amount"in p&&e(0,i=p.amount)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&3&&!i&&n.playTokenBalance&&e(0,i=n.playTokenBalance.div("100000000000000000").toNumber()/10)},[i,n,o,s,l,a,b,u,d]}class Pt extends st{constructor(t){super(t);lt(this,t,dt,F,it,{}),h("SvelteRegisterComponent",{component:this,tagName:"Cashout",options:t,id:F.name})}}export{Pt as default};
//# sourceMappingURL=cashout.svelte-4ff0c580.js.map
