import{a5 as Ne,S as Ge,i as Oe,s as Te,d as W,O as We,P as qe,v as Ce,o as Be,ar as ke,e as v,z as He,n as N,t as d,c as k,f as E,A as Ve,q as B,l as p,g as a,h as m,j as P,k as u,B as Xe,L as c,x as Me,u as Qe,E as Ue,m as q,N as we}from"../chunks/vendor-e78c39f1.js";import{b as Ie}from"../chunks/paths-28a87002.js";import{N as Re}from"../chunks/NavButton-b22b61c0.js";import{b as Ye}from"../chunks/base-652be6d9.js";import{B as Je}from"../chunks/config-af7f3a10.js";import{S as Ke}from"../chunks/subgraph-aa394bde.js";import"../chunks/contracts-69d01f63.js";class Ze extends Ye{constructor(){super({step:"IDLE"})}async fetch(){const t=`
query {
    space(id: "Space") {
      totalStaked
      currentStake
      numPlanetsStaked
      numPlanetsStakedOnce
      numFleetsLaunched
      numFleetsResolved
      numPlanetsWithExit
      numPlanetsExitFinalized

    }
}
`;try{let l;try{const s=await Ke.query(t,{context:{requestPolicy:"network-only"}});if(s.error)throw s.error;l=s.data}catch(s){throw console.error(s),this.setPartial({error:"cannot fetch from thegraph node"}),new Error("cannot fetch from thegraph node")}const r={totalStaked:Ne.from(l.space.totalStaked),currentStake:Ne.from(l.space.currentStake),numPlanetsStaked:parseInt(l.space.numPlanetsStaked),numPlanetsStakedOnce:parseInt(l.space.numPlanetsStakedOnce),numFleetsLaunched:parseInt(l.space.numFleetsLaunched),numFleetsResolved:parseInt(l.space.numFleetsResolved),numPlanetsWithExit:parseInt(l.space.numPlanetsWithExit),numPlanetsExitFinalized:parseInt(l.space.numPlanetsExitFinalized)};this.setPartial({step:"READY",data:r})}catch(l){console.error(l)}this.timeout=setTimeout(this.fetch.bind(this),Je*1e3)}start(){this.$store.step==="IDLE"&&this.setPartial({step:"LOADING"}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.fetch.bind(this),1e3)}stop(){this.setPartial({step:"IDLE"}),this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}const ne=new Ze,S="src/routes/stats.svelte";function Ae(f){let t;const l={c:function(){t=d("Back To Game")},l:function(s){t=p(s,"Back To Game")},m:function(s,n){u(s,t,n)},d:function(s){s&&a(t)}};return W("SvelteRegisterBlock",{block:l,id:Ae.name,type:"slot",source:'(12:2) <NavButton label=\\"Back To Game\\" href={`${base}/`}>',ctx:f}),l}function xe(f){let t,l,r,s,n=ke(f[0].data.currentStake)+"",i,b,D,$,C,x,h,z=f[0].data.numPlanetsStaked+"",y,_,F,L,H,T,w,V=f[0].data.numFleetsLaunched+"",Y,oe,J,j,ie,K,I,X=f[0].data.numFleetsResolved+"",Z,re,g,G,ue,ee,R,M=f[0].data.numPlanetsWithExit+"",te,ce,se,O,fe,ae,A,Q=f[0].data.numPlanetsExitFinalized+"",le,me;const Pe={c:function(){t=v("label"),l=d("Current In-Game Stake"),r=N(),s=v("p"),i=d(n),b=d(" XDAI"),D=N(),$=v("label"),C=d("Number of Planet Staked"),x=N(),h=v("p"),y=d(z),_=d(" planets"),F=N(),L=v("label"),H=d("Number of Fleets Launched"),T=N(),w=v("p"),Y=d(V),oe=d(" fleets"),J=N(),j=v("label"),ie=d("Number of Fleets Resolved"),K=N(),I=v("p"),Z=d(X),re=d(" fleets"),g=N(),G=v("label"),ue=d("Number of Planet with Exits (fully resolved or pending)"),ee=N(),R=v("p"),te=d(M),ce=d(" exits"),se=N(),O=v("label"),fe=d("Number of Planet Exit finalized (could be done but not registered yet)"),ae=N(),A=v("p"),le=d(Q),me=d(" exits"),this.h()},l:function(e){t=k(e,"LABEL",{for:!0});var o=E(t);l=p(o,"Current In-Game Stake"),o.forEach(a),r=B(e),s=k(e,"P",{class:!0,id:!0});var de=E(s);i=p(de,n),b=p(de," XDAI"),de.forEach(a),D=B(e),$=k(e,"LABEL",{for:!0});var Se=E($);C=p(Se,"Number of Planet Staked"),Se.forEach(a),x=B(e),h=k(e,"P",{class:!0,id:!0});var pe=E(h);y=p(pe,z),_=p(pe," planets"),pe.forEach(a),F=B(e),L=k(e,"LABEL",{for:!0});var ye=E(L);H=p(ye,"Number of Fleets Launched"),ye.forEach(a),T=B(e),w=k(e,"P",{class:!0,id:!0});var he=E(w);Y=p(he,V),oe=p(he," fleets"),he.forEach(a),J=B(e),j=k(e,"LABEL",{for:!0});var Le=E(j);ie=p(Le,"Number of Fleets Resolved"),Le.forEach(a),K=B(e),I=k(e,"P",{class:!0,id:!0});var be=E(I);Z=p(be,X),re=p(be," fleets"),be.forEach(a),g=B(e),G=k(e,"LABEL",{for:!0});var Fe=E(G);ue=p(Fe,"Number of Planet with Exits (fully resolved or pending)"),Fe.forEach(a),ee=B(e),R=k(e,"P",{class:!0,id:!0});var _e=E(R);te=p(_e,M),ce=p(_e," exits"),_e.forEach(a),se=B(e),O=k(e,"LABEL",{for:!0});var $e=E(O);fe=p($e,"Number of Planet Exit finalized (could be done but not registered yet)"),$e.forEach(a),ae=B(e),A=k(e,"P",{class:!0,id:!0});var ve=E(A);le=p(ve,Q),me=p(ve," exits"),ve.forEach(a),this.h()},h:function(){m(t,"for","currentStake"),P(t,S,22,6,826),m(s,"class","mb-4"),m(s,"id","currentStake"),P(s,S,23,6,889),m($,"for","numPlanetsStaked"),P($,S,28,6,1129),m(h,"class","mb-4"),m(h,"id","numPlanetsStaked"),P(h,S,29,6,1198),m(L,"for","numFleetsLaunched"),P(L,S,31,6,1286),m(w,"class","mb-4"),m(w,"id","numFleetsLaunched"),P(w,S,32,6,1357),m(j,"for","numFleetsResolved"),P(j,S,34,6,1446),m(I,"class","mb-4"),m(I,"id","numFleetsResolved"),P(I,S,35,6,1517),m(G,"for","numPlanetsWithExit"),P(G,S,37,6,1606),m(R,"class","mb-4"),m(R,"id","numPlanetsWithExit"),P(R,S,38,6,1708),m(O,"for","numPlanetsExitFinalized"),P(O,S,40,6,1798),m(A,"class","mb-4"),m(A,"id","numPlanetsExitFinalized"),P(A,S,42,6,1927)},m:function(e,o){u(e,t,o),c(t,l),u(e,r,o),u(e,s,o),c(s,i),c(s,b),u(e,D,o),u(e,$,o),c($,C),u(e,x,o),u(e,h,o),c(h,y),c(h,_),u(e,F,o),u(e,L,o),c(L,H),u(e,T,o),u(e,w,o),c(w,Y),c(w,oe),u(e,J,o),u(e,j,o),c(j,ie),u(e,K,o),u(e,I,o),c(I,Z),c(I,re),u(e,g,o),u(e,G,o),c(G,ue),u(e,ee,o),u(e,R,o),c(R,te),c(R,ce),u(e,se,o),u(e,O,o),c(O,fe),u(e,ae,o),u(e,A,o),c(A,le),c(A,me)},p:function(e,o){o&1&&n!==(n=ke(e[0].data.currentStake)+"")&&q(i,n),o&1&&z!==(z=e[0].data.numPlanetsStaked+"")&&q(y,z),o&1&&V!==(V=e[0].data.numFleetsLaunched+"")&&q(Y,V),o&1&&X!==(X=e[0].data.numFleetsResolved+"")&&q(Z,X),o&1&&M!==(M=e[0].data.numPlanetsWithExit+"")&&q(te,M),o&1&&Q!==(Q=e[0].data.numPlanetsExitFinalized+"")&&q(le,Q)},d:function(e){e&&a(t),e&&a(r),e&&a(s),e&&a(D),e&&a($),e&&a(x),e&&a(h),e&&a(F),e&&a(L),e&&a(T),e&&a(w),e&&a(J),e&&a(j),e&&a(K),e&&a(I),e&&a(g),e&&a(G),e&&a(ee),e&&a(R),e&&a(se),e&&a(O),e&&a(ae),e&&a(A)}};return W("SvelteRegisterBlock",{block:Pe,id:xe.name,type:"else",source:"(22:4) {:else}",ctx:f}),Pe}function De(f){let t,l;const r={c:function(){t=v("span"),l=d("Loading..."),this.h()},l:function(n){t=k(n,"SPAN",{class:!0});var i=E(t);l=p(i,"Loading..."),i.forEach(a),this.h()},h:function(){m(t,"class","text-yellow-600"),P(t,S,20,6,760)},m:function(n,i){u(n,t,i),c(t,l)},p:we,d:function(n){n&&a(t)}};return W("SvelteRegisterBlock",{block:r,id:De.name,type:"if",source:"(20:40) ",ctx:f}),r}function ze(f){let t,l;const r={c:function(){t=v("span"),l=d("Please wait..."),this.h()},l:function(n){t=k(n,"SPAN",{class:!0});var i=E(t);l=p(i,"Please wait..."),i.forEach(a),this.h()},h:function(){m(t,"class","text-yellow-600"),P(t,S,18,6,661)},m:function(n,i){u(n,t,i),c(t,l)},p:we,d:function(n){n&&a(t)}};return W("SvelteRegisterBlock",{block:r,id:ze.name,type:"if",source:"(18:37) ",ctx:f}),r}function je(f){let t,l=f[0].error+"",r;const s={c:function(){t=v("span"),r=d(l),this.h()},l:function(i){t=k(i,"SPAN",{class:!0});var b=E(t);r=p(b,l),b.forEach(a),this.h()},h:function(){m(t,"class","text-red-600"),P(t,S,16,6,568)},m:function(i,b){u(i,t,b),c(t,r)},p:function(i,b){b&1&&l!==(l=i[0].error+"")&&q(r,l)},d:function(i){i&&a(t)}};return W("SvelteRegisterBlock",{block:s,id:je.name,type:"if",source:"(16:4) {#if $stats.error}",ctx:f}),s}function Ee(f){let t,l,r,s,n,i,b,D,$;l=new Re({props:{label:"Back To Game",href:`${Ie}/`,$$slots:{default:[Ae]},$$scope:{ctx:f}},$$inline:!0});function C(y,_){return y[0].error?je:y[0].step==="IDLE"?ze:y[0].step==="LOADING"?De:xe}let x=C(f),h=x(f);const z={c:function(){t=v("div"),He(l.$$.fragment),r=N(),s=v("div"),n=v("h1"),i=v("span"),b=d("Stats"),D=N(),h.c(),this.h()},l:function(_){t=k(_,"DIV",{class:!0});var F=E(t);Ve(l.$$.fragment,F),r=B(F),s=k(F,"DIV",{class:!0});var L=E(s);n=k(L,"H1",{class:!0});var H=E(n);i=k(H,"SPAN",{class:!0});var T=E(i);b=p(T,"Stats"),T.forEach(a),H.forEach(a),D=B(L),h.l(L),L.forEach(a),F.forEach(a),this.h()},h:function(){m(i,"class","font-black"),P(i,S,13,30,495),m(n,"class","text-cyan-400"),P(n,S,13,4,469),m(s,"class","markdown text-white p-3"),P(s,S,12,2,427),m(t,"class","w-full h-full bg-black text-white"),P(t,S,10,0,300)},m:function(_,F){u(_,t,F),Xe(l,t,null),c(t,r),c(t,s),c(s,n),c(n,i),c(i,b),c(s,D),h.m(s,null),$=!0},p:function(_,[F]){const L={};F&2&&(L.$$scope={dirty:F,ctx:_}),l.$set(L),x===(x=C(_))&&h?h.p(_,F):(h.d(1),h=x(_),h&&(h.c(),h.m(s,null)))},i:function(_){$||(Me(l.$$.fragment,_),$=!0)},o:function(_){Qe(l.$$.fragment,_),$=!1},d:function(_){_&&a(t),Ue(l),h.d()}};return W("SvelteRegisterBlock",{block:z,id:Ee.name,type:"component",source:"",ctx:f}),z}function ge(f,t,l){let r;We(ne,"stats"),qe(f,ne,b=>l(0,r=b));let{$$slots:s={},$$scope:n}=t;Ce("Stats",s,[]),Be(()=>{ne.start()});const i=[];return Object.keys(t).forEach(b=>{!~i.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<Stats> was created with unknown prop '${b}'`)}),f.$capture_state=()=>({base:Ie,NavButton:Re,stats:ne,formatEther:ke,onMount:Be,$stats:r}),[r]}class it extends Ge{constructor(t){super(t);Oe(this,t,ge,Ee,Te,{}),W("SvelteRegisterComponent",{component:this,tagName:"Stats",options:t,id:Ee.name})}}export{it as default};
//# sourceMappingURL=stats.svelte-e775d18c.js.map
