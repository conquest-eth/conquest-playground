import{S as Ke,i as Ze,s as Xe,d as Z,O as Se,P as Te,v as xe,af as De,a7 as Qe,Q as et,z as re,A as ce,B as ie,x as G,u as H,E as ue,n as D,e as y,t as R,p as Ce,q as Q,c as $,f as L,l as O,g as m,h as P,j as w,k as W,L as n,w as fe,ag as he,m as Ge,r as me,ai as Me,N as be,M as tt}from"../chunks/vendor-e78c39f1.js";import{b as Pe}from"../chunks/paths-28a87002.js";import{B as ke}from"../chunks/Blockie-6a051512.js";import{N as qe}from"../chunks/NavButton-b22b61c0.js";/* empty css                                                      */import{p as ve}from"../chunks/playersQuery-3a795d59.js";import"../chunks/config-af7f3a10.js";import{m as de,M as Ue}from"../chunks/MessageFlow-30f15648.js";import{f as He,w as pe}from"../chunks/wallet-c826be1b.js";import"../chunks/Copiable-f9ca3aee.js";import"../chunks/subgraph-aa394bde.js";import"../chunks/graphql-582eebcc.js";import"../chunks/base-652be6d9.js";import"../chunks/account-c0a26acd.js";import"../chunks/privateWallet-7a0cfca0.js";import"../chunks/contracts-69d01f63.js";import"../chunks/Modal-a8884379.js";import"../chunks/PanelButton-b24a8fdb.js";const{Object:at}=et,E="src/routes/alliances.svelte";function We(o,e,a){const t=o.slice();return t[4]=e[a],t}function Je(o,e,a){const t=o.slice();return t[7]=e[a],t}function Ve(o){let e;const a={c:function(){e=R("Back To Game")},l:function(r){e=O(r,"Back To Game")},m:function(r,i){W(r,e,i)},d:function(r){r&&m(e)}};return Z("SvelteRegisterBlock",{block:a,id:Ve.name,type:"slot",source:'(27:0) <NavButton label=\\"Back To Game\\" href={`${base}/`}>',ctx:o}),a}function Ye(o){let e,a,t,r,i,h=Object.entries(o[0].data.alliances);he(h);let c=[];for(let l=0;l<h.length;l+=1)c[l]=ye(We(o,h,l));const B=l=>H(c[l],1,1,()=>{c[l]=null}),F={c:function(){e=y("div"),a=y("ul"),t=y("hr"),r=D();for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l:function(d){e=$(d,"DIV",{});var p=L(e);a=$(p,"UL",{class:!0});var u=L(a);t=$(u,"HR",{}),r=Q(u);for(let _=0;_<c.length;_+=1)c[_].l(u);u.forEach(m),p.forEach(m),this.h()},h:function(){w(t,E,57,6,2376),P(a,"class","m-2"),w(a,E,56,4,2353),w(e,E,55,2,2343)},m:function(d,p){W(d,e,p),n(e,a),n(a,t),n(a,r);for(let u=0;u<c.length;u+=1)c[u].m(a,null);i=!0},p:function(d,p){if(p&1){h=Object.entries(d[0].data.alliances),he(h);let u;for(u=0;u<h.length;u+=1){const _=We(d,h,u);c[u]?(c[u].p(_,p),G(c[u],1)):(c[u]=ye(_),c[u].c(),G(c[u],1),c[u].m(a,null))}for(me(),u=h.length;u<c.length;u+=1)B(u);fe()}},i:function(d){if(!i){for(let p=0;p<h.length;p+=1)G(c[p]);i=!0}},o:function(d){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)H(c[p]);i=!1},d:function(d){d&&m(e),Me(c,d)}};return Z("SvelteRegisterBlock",{block:F,id:Ye.name,type:"else",source:"(55:0) {:else}",ctx:o}),F}function ze(o){let e,a;const t={c:function(){e=y("p"),a=R("Loading..."),this.h()},l:function(i){e=$(i,"P",{});var h=L(e);a=O(h,"Loading..."),h.forEach(m),this.h()},h:function(){w(e,E,53,2,2315)},m:function(i,h){W(i,e,h),n(e,a)},p:be,i:be,o:be,d:function(i){i&&m(e)}};return Z("SvelteRegisterBlock",{block:t,id:ze.name,type:"if",source:"(53:0) {#if !$playersQuery || !$playersQuery.data || $playersQuery.step === 'LOADING'}",ctx:o}),t}function ge(o){let e,a,t=o[7].address+"",r,i,h,c,B,F,l,d;a=new ke({props:{class:"w-6 h-6 m-1 inline",address:o[7].address},$$inline:!0});function p(){return o[2](o[7])}const u={c:function(){e=y("li"),re(a.$$.fragment),r=R(t),i=R(" ("),h=y("button"),c=R("contact"),B=R(`)
              `),this.h()},l:function(v){e=$(v,"LI",{});var I=L(e);ce(a.$$.fragment,I),r=O(I,t),i=O(I," ("),h=$(I,"BUTTON",{class:!0});var S=L(h);c=O(S,"contact"),S.forEach(m),B=O(I,`)
              `),I.forEach(m),this.h()},h:function(){P(h,"class","underline"),w(h,E,70,97,2988),w(e,E,69,14,2886)},m:function(v,I){W(v,e,I),ie(a,e,null),n(e,r),n(e,i),n(e,h),n(h,c),n(e,B),F=!0,l||(d=tt(h,"click",p,!1,!1,!1),l=!0)},p:function(v,I){o=v;const S={};I&1&&(S.address=o[7].address),a.$set(S),(!F||I&1)&&t!==(t=o[7].address+"")&&Ge(r,t)},i:function(v){F||(G(a.$$.fragment,v),F=!0)},o:function(v){H(a.$$.fragment,v),F=!1},d:function(v){v&&m(e),ue(a),l=!1,d()}};return Z("SvelteRegisterBlock",{block:u,id:ge.name,type:"each",source:"(69:12) {#each entry[1].members as member}",ctx:o}),u}function ye(o){let e,a,t,r,i=o[4][0]+"",h,c,B,F,l,d,p,u,_,v,I,S,X,V;t=new ke({props:{class:"inline w-10 h-10 m-1",address:o[4][0]},$$inline:!0});let T=o[4][1].members;he(T);let b=[];for(let A=0;A<T.length;A+=1)b[A]=ge(Je(o,T,A));const ne=A=>H(b[A],1,1,()=>{b[A]=null}),Y={c:function(){e=y("li"),a=y("h3"),re(t.$$.fragment),r=R(" Alliance "),h=R(i),c=D(),B=y("a"),F=R("JOIN/MANAGE"),d=D(),p=y("p"),u=R("members:"),_=D(),v=y("ul");for(let g=0;g<b.length;g+=1)b[g].c();I=D(),S=y("hr"),X=D(),this.h()},l:function(g){e=$(g,"LI",{});var f=L(e);a=$(f,"H3",{class:!0});var C=L(a);ce(t.$$.fragment,C),r=O(C," Alliance "),h=O(C,i),C.forEach(m),c=Q(f),B=$(f,"A",{target:!0,class:!0,href:!0});var j=L(B);F=O(j,"JOIN/MANAGE"),j.forEach(m),d=Q(f),p=$(f,"P",{});var M=L(p);u=O(M,"members:"),M.forEach(m),_=Q(f),v=$(f,"UL",{class:!0});var x=L(v);for(let z=0;z<b.length;z+=1)b[z].l(x);x.forEach(m),I=Q(f),S=$(f,"HR",{}),X=Q(f),f.forEach(m),this.h()},h:function(){P(a,"class","text-xl text-yellow-500"),w(a,E,60,10,2474),P(B,"target","_blank"),P(B,"class","inline-block border-2 border-yellow-400 p-1 m-1"),P(B,"href",l=o[4][1].frontendURI),w(B,E,63,10,2629),w(p,E,66,10,2782),P(v,"class","m-2"),w(v,E,67,10,2808),w(S,E,77,10,3201),w(e,E,59,8,2459)},m:function(g,f){W(g,e,f),n(e,a),ie(t,a,null),n(a,r),n(a,h),n(e,c),n(e,B),n(B,F),n(e,d),n(e,p),n(p,u),n(e,_),n(e,v);for(let C=0;C<b.length;C+=1)b[C].m(v,null);n(e,I),n(e,S),n(e,X),V=!0},p:function(g,f){const C={};if(f&1&&(C.address=g[4][0]),t.$set(C),(!V||f&1)&&i!==(i=g[4][0]+"")&&Ge(h,i),(!V||f&1&&l!==(l=g[4][1].frontendURI))&&P(B,"href",l),f&1){T=g[4][1].members,he(T);let j;for(j=0;j<T.length;j+=1){const M=Je(g,T,j);b[j]?(b[j].p(M,f),G(b[j],1)):(b[j]=ge(M),b[j].c(),G(b[j],1),b[j].m(v,null))}for(me(),j=T.length;j<b.length;j+=1)ne(j);fe()}},i:function(g){if(!V){G(t.$$.fragment,g);for(let f=0;f<T.length;f+=1)G(b[f]);V=!0}},o:function(g){H(t.$$.fragment,g),b=b.filter(Boolean);for(let f=0;f<b.length;f+=1)H(b[f]);V=!1},d:function(g){g&&m(e),ue(t),Me(b,g)}};return Z("SvelteRegisterBlock",{block:Y,id:ye.name,type:"each",source:"(59:6) {#each Object.entries($playersQuery.data.alliances) as entry}",ctx:o}),Y}function $e(o){let e,a;e=new Ue({$$inline:!0});const t={c:function(){re(e.$$.fragment)},l:function(i){ce(e.$$.fragment,i)},m:function(i,h){ie(e,i,h),a=!0},i:function(i){a||(G(e.$$.fragment,i),a=!0)},o:function(i){H(e.$$.fragment,i),a=!1},d:function(i){ue(e,i)}};return Z("SvelteRegisterBlock",{block:t,id:$e.name,type:"if",source:"(86:0) {#if $messageFlow.error || $messageFlow.step !== 'IDLE'}",ctx:o}),t}function we(o){let e,a,t,r,i,h,c,B,F,l,d,p,u,_,v,I,S,X,V,T,b,ne,Y,A,g,f,C,j,M,x,z,q,U,ee,te,oe;e=new qe({props:{label:"Back To Game",href:`${Pe}/`,$$slots:{default:[Ve]},$$scope:{ctx:o}},$$inline:!0});const Ee=[ze,Ye],K=[];function Ae(J,s){return!J[0]||!J[0].data||J[0].step==="LOADING"?0:1}q=Ae(o),U=K[q]=Ee[q](o);let N=(o[1].error||o[1].step!=="IDLE")&&$e(o);const je={c:function(){re(e.$$.fragment),a=D(),t=y("div"),r=y("h2"),i=R("What are alliances?"),h=D(),c=y("p"),B=R("Alliance allow 2 or more players to collaborate more easily in game. They"),F=D(),l=y("ul"),d=y("li"),p=R("- can combine attacks"),u=D(),_=y("li"),v=R("- can send each other spaceships without any loss"),I=D(),S=y("li"),X=R("- do not carry risk of attacking each other"),V=D(),T=y("p"),b=R(`And they are programmable. Each alliance is a smart contract. You can create alliance with any rule you want. They
    can for example require a slashable deposit, taken away in case of betrayal.`),ne=D(),Y=y("div"),A=y("p"),g=R("For now we have created a basic alliance that is managed by one admin user. Check it out "),f=y("a"),C=R("here"),j=D(),M=y("h2"),x=R("Current Alliances:"),z=D(),U.c(),ee=D(),N&&N.c(),te=Ce(),this.h()},l:function(s){ce(e.$$.fragment,s),a=Q(s),t=$(s,"DIV",{class:!0});var k=L(t);r=$(k,"H2",{class:!0});var se=L(r);i=O(se,"What are alliances?"),se.forEach(m),h=Q(k),c=$(k,"P",{});var ae=L(c);B=O(ae,"Alliance allow 2 or more players to collaborate more easily in game. They"),ae.forEach(m),F=Q(k),l=$(k,"UL",{});var le=L(l);d=$(le,"LI",{});var Be=L(d);p=O(Be,"- can combine attacks"),Be.forEach(m),u=Q(le),_=$(le,"LI",{});var Le=L(_);v=O(Le,"- can send each other spaceships without any loss"),Le.forEach(m),I=Q(le),S=$(le,"LI",{});var Ie=L(S);X=O(Ie,"- do not carry risk of attacking each other"),Ie.forEach(m),le.forEach(m),V=Q(k),T=$(k,"P",{});var Ne=L(T);b=O(Ne,`And they are programmable. Each alliance is a smart contract. You can create alliance with any rule you want. They
    can for example require a slashable deposit, taken away in case of betrayal.`),Ne.forEach(m),ne=Q(k),Y=$(k,"DIV",{class:!0});var Re=L(Y);A=$(Re,"P",{});var _e=L(A);g=O(_e,"For now we have created a basic alliance that is managed by one admin user. Check it out "),f=$(_e,"A",{class:!0,href:!0});var Oe=L(f);C=O(Oe,"here"),Oe.forEach(m),_e.forEach(m),Re.forEach(m),k.forEach(m),j=Q(s),M=$(s,"H2",{class:!0});var Fe=L(M);x=O(Fe,"Current Alliances:"),Fe.forEach(m),z=Q(s),U.l(s),ee=Q(s),N&&N.l(s),te=Ce(),this.h()},h:function(){P(r,"class","text-xl mb-1"),w(r,E,29,2,1389),w(c,E,30,2,1441),w(d,E,32,4,1533),w(_,E,33,4,1568),w(S,E,34,4,1631),w(l,E,31,2,1524),w(T,E,36,2,1694),P(f,"class","underline"),P(f,"href","https://basic-alliances-defcon.conquest.etherplay.io/"),w(f,E,43,95,2030),w(A,E,42,4,1931),P(Y,"class","mt-4"),w(Y,E,41,2,1908),P(t,"class","m-4"),w(t,E,28,0,1369),P(M,"class","m-4 text-green-600 text-xl"),w(M,E,51,0,2170)},m:function(s,k){ie(e,s,k),W(s,a,k),W(s,t,k),n(t,r),n(r,i),n(t,h),n(t,c),n(c,B),n(t,F),n(t,l),n(l,d),n(d,p),n(l,u),n(l,_),n(_,v),n(l,I),n(l,S),n(S,X),n(t,V),n(t,T),n(T,b),n(t,ne),n(t,Y),n(Y,A),n(A,g),n(A,f),n(f,C),W(s,j,k),W(s,M,k),n(M,x),W(s,z,k),K[q].m(s,k),W(s,ee,k),N&&N.m(s,k),W(s,te,k),oe=!0},p:function(s,[k]){const se={};k&1024&&(se.$$scope={dirty:k,ctx:s}),e.$set(se);let ae=q;q=Ae(s),q===ae?K[q].p(s,k):(me(),H(K[ae],1,1,()=>{K[ae]=null}),fe(),U=K[q],U?U.p(s,k):(U=K[q]=Ee[q](s),U.c()),G(U,1),U.m(ee.parentNode,ee)),s[1].error||s[1].step!=="IDLE"?N?k&2&&G(N,1):(N=$e(s),N.c(),G(N,1),N.m(te.parentNode,te)):N&&(me(),H(N,1,1,()=>{N=null}),fe())},i:function(s){oe||(G(e.$$.fragment,s),G(U),G(N),oe=!0)},o:function(s){H(e.$$.fragment,s),H(U),H(N),oe=!1},d:function(s){ue(e,s),s&&m(a),s&&m(t),s&&m(j),s&&m(M),s&&m(z),K[q].d(s),s&&m(ee),N&&N.d(s),s&&m(te)}};return Z("SvelteRegisterBlock",{block:je,id:we.name,type:"component",source:"",ctx:o}),je}function lt(o,e,a){let t,r;Se(ve,"playersQuery"),Te(o,ve,l=>a(0,t=l)),Se(de,"messageFlow"),Te(o,de,l=>a(1,r=l));let{$$slots:i={},$$scope:h}=e;xe("Alliances",i,[]);async function c(){await He.execute(async l=>{const d=De.createRandom().privateKey,p=await l.BasicAllianceFactory.getAddress(d),u=`Join Alliance ${Qe(p.toLowerCase(),20)}`,_=await pe.provider.getSigner().signMessage(u);await l.BasicAllianceFactory.instantiate(pe.address,[{addr:pe.address,nonce:0,signature:_}],d)})}const B=[];at.keys(e).forEach(l=>{!~B.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Alliances> was created with unknown prop '${l}'`)});const F=l=>de.show(l.address);return o.$capture_state=()=>({base:Pe,Blockie:ke,NavButton:qe,playersQuery:ve,messageFlow:de,MessageFlow:Ue,Wallet:De,flow:He,wallet:pe,hexZeroPad:Qe,create:c,$playersQuery:t,$messageFlow:r}),[t,r,F]}class $t extends Ke{constructor(e){super(e);Ze(this,e,lt,we,Xe,{}),Z("SvelteRegisterComponent",{component:this,tagName:"Alliances",options:e,id:we.name})}}export{$t as default};
//# sourceMappingURL=alliances.svelte-eb3f7bb6.js.map
