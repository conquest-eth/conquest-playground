var v=Object.defineProperty;var m=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var p=(o,t,e)=>t in o?v(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,u=(o,t)=>{for(var e in t||(t={}))y.call(t,e)&&p(o,e,t[e]);if(m)for(var e of m(t))w.call(t,e)&&p(o,e,t[e]);return o};import{aQ as x,aR as P,aS as r,aT as E,aU as b,aV as I,aW as L,aX as $}from"./vendor-e78c39f1.js";import{z as N}from"./config-af7f3a10.js";const R={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0},S=x.concat();class T{constructor(t){t?this.client=new P({url:t,exchanges:S}):console.error("need an url for graphql queries")}mutate(t,e){return this.client.mutation(t,e==null?void 0:e.variables,e==null?void 0:e.context).toPromise()}query(t,e){return this.client.query(t,e==null?void 0:e.variables,e==null?void 0:e.context).toPromise()}async queryList(t,e){const a=e.path.split("."),n=100;let i="0x0",c=n,l=[];for(;c===n;){const d=await this.client.query(t,u({first:n,lastId:i},e==null?void 0:e.variables),e==null?void 0:e.context).toPromise();if(d.error)throw new Error(d.error.message);const h=d.data;let f=[];if(h&&e.path){let s=h;for(const q of a)s=s[q];f=s}if(c=f.length,c>0){const s=(e==null?void 0:e.getLastId)!==void 0?e==null?void 0:e.getLastId(l):f[c-1].id;if(i===s){console.log("same query, stop");break}i=s}l=l.concat(f)}return l}subscribeToQuery(t,e){const a=r(E([b({fetching:!0,stale:!1}),r(this.client.query(t,e==null?void 0:e.variables,e==null?void 0:e.context),I(({stale:n,data:i,error:c,extensions:l})=>({fetching:!1,stale:!!n,data:i,error:c,extensions:l}))),b({fetching:!1,stale:!1})]),L((n,i)=>u(u({},n),i),R));return{subscribe(n){return r(a,$(n)).unsubscribe}}}}const V=new T(N);export{V as S};
//# sourceMappingURL=subgraph-aa394bde.js.map
