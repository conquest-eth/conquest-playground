import{S as x,i as ee,s as te,d as g,O as oe,P as ne,v as se,p as D,k as h,r as re,u as B,w as ce,x as M,g as m,z as O,A as L,B as N,E as T,e as w,t as v,c as b,f as y,l as E,h as k,j as F,L as $,n as I,q as A,m as C,N as le}from"./vendor-e78c39f1.js";import{M as G}from"./Modal-a8884379.js";import{P as q}from"./PanelButton-b24a8fdb.js";import{b as ae}from"./base-652be6d9.js";import{f as H}from"./privateWallet-7a0cfca0.js";const ie="__VITE_PROFILE_URI__";class fe extends ae{constructor(){super({type:"MESSAGE",step:"IDLE"})}async show(e){this.setPartial({step:"LOADING",owner:e});try{const t=await(await fetch(`${ie}get/${e}`,{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}})).json();this.setPartial({step:"READY",owner:e,profile:t.account})}catch(n){this.setPartial({error:n})}}async cancel(){this._reset()}async acknownledgeSuccess(){this._reset()}async acknownledgeError(){this.setPartial({error:void 0})}_reset(){this.setPartial({step:"IDLE",owner:void 0})}}var S=new fe;const P="src/lib/flows/MessageFlow.svelte";function V(l){let e,n;e=new G({props:{$$slots:{default:[J]},$$scope:{ctx:l}},$$inline:!0}),e.$on("close",l[5]),e.$on("confirm",l[6]);const r={c:function(){O(e.$$.fragment)},l:function(o){L(e.$$.fragment,o)},m:function(o,s){N(e,o,s),n=!0},p:function(o,s){const a={};s&129&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i:function(o){n||(M(e.$$.fragment,o),n=!0)},o:function(o){B(e.$$.fragment,o),n=!1},d:function(o){T(e,o)}};return g("SvelteRegisterBlock",{block:r,id:V.name,type:"if",source:"(19:40) ",ctx:l}),r}function W(l){let e,n;e=new G({props:{$$slots:{default:[K]},$$scope:{ctx:l}},$$inline:!0}),e.$on("close",l[3]),e.$on("confirm",l[4]);const r={c:function(){O(e.$$.fragment)},l:function(o){L(e.$$.fragment,o)},m:function(o,s){N(e,o,s),n=!0},p:function(o,s){const a={};s&128&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i:function(o){n||(M(e.$$.fragment,o),n=!0)},o:function(o){B(e.$$.fragment,o),n=!1},d:function(o){T(e,o)}};return g("SvelteRegisterBlock",{block:r,id:W.name,type:"if",source:"(15:42) ",ctx:l}),r}function Y(l){let e,n;e=new G({props:{$$slots:{default:[Z]},$$scope:{ctx:l}},$$inline:!0}),e.$on("close",l[2]);const r={c:function(){O(e.$$.fragment)},l:function(o){L(e.$$.fragment,o)},m:function(o,s){N(e,o,s),n=!0},p:function(o,s){const a={};s&129&&(a.$$scope={dirty:s,ctx:o}),e.$set(a)},i:function(o){n||(M(e.$$.fragment,o),n=!0)},o:function(o){B(e.$$.fragment,o),n=!1},d:function(o){T(e,o)}};return g("SvelteRegisterBlock",{block:r,id:Y.name,type:"if",source:"(7:0) {#if $messageFlow.error}",ctx:l}),r}function z(l){let e,n=l[0].owner+"",r,t,o,s,a,u,f=l[0].profile.description+"",i;const _={c:function(){e=w("p"),r=v(n),t=I(),o=w("p"),s=v("Here is how to contact the player:"),a=I(),u=w("p"),i=v(f),this.h()},l:function(c){e=b(c,"P",{class:!0});var p=y(e);r=E(p,n),p.forEach(m),t=A(c),o=b(c,"P",{class:!0});var R=y(o);s=E(R,"Here is how to contact the player:"),R.forEach(m),a=A(c),u=b(c,"P",{class:!0});var j=y(u);i=E(j,f),j.forEach(m),this.h()},h:function(){k(e,"class","text-center"),F(e,P,27,6,1327),k(o,"class","m-4 text-center"),F(o,P,28,6,1381),k(u,"class","text-center"),F(u,P,29,6,1453)},m:function(c,p){h(c,e,p),$(e,r),h(c,t,p),h(c,o,p),$(o,s),h(c,a,p),h(c,u,p),$(u,i)},p:function(c,p){p&1&&n!==(n=c[0].owner+"")&&C(r,n),p&1&&f!==(f=c[0].profile.description+"")&&C(i,f)},d:function(c){c&&m(e),c&&m(t),c&&m(o),c&&m(a),c&&m(u)}};return g("SvelteRegisterBlock",{block:_,id:z.name,type:"if",source:"(27:47) ",ctx:l}),_}function Q(l){let e,n,r,t,o,s,a;const u={c:function(){e=w("p"),n=v("The user did not provide any information."),r=I(),t=w("p"),o=v(`Find each other on
        `),s=w("a"),a=v("discord"),this.h()},l:function(i){e=b(i,"P",{class:!0});var _=y(e);n=E(_,"The user did not provide any information."),_.forEach(m),r=A(i),t=b(i,"P",{class:!0});var d=y(t);o=E(d,`Find each other on
        `),s=b(d,"A",{href:!0,target:!0,rel:!0,class:!0});var c=y(s);a=E(c,"discord"),c.forEach(m),d.forEach(m),this.h()},h:function(){k(e,"class","text-center"),F(e,P,21,6,1027),k(s,"href","https://discord.gg/Qb4gr2ekfr"),k(s,"target","_blank"),k(s,"rel","noopener"),k(s,"class","underline"),F(s,P,24,8,1161),k(t,"class","text-center"),F(t,P,22,6,1102)},m:function(i,_){h(i,e,_),$(e,n),h(i,r,_),h(i,t,_),$(t,o),$(t,s),$(s,a)},p:le,d:function(i){i&&m(e),i&&m(r),i&&m(t)}};return g("SvelteRegisterBlock",{block:u,id:Q.name,type:"if",source:"(21:4) {#if !$messageFlow.profile || !$messageFlow.profile.description}",ctx:l}),u}function J(l){let e;function n(s,a){if(!s[0].profile||!s[0].profile.description)return Q;if(s[0].profile.description)return z}let r=n(l),t=r&&r(l);const o={c:function(){t&&t.c(),e=D()},l:function(a){t&&t.l(a),e=D()},m:function(a,u){t&&t.m(a,u),h(a,e,u)},p:function(a,u){r===(r=n(a))&&t?t.p(a,u):(t&&t.d(1),t=r&&r(a),t&&(t.c(),t.m(e.parentNode,e)))},d:function(a){t&&t.d(a),a&&m(e)}};return g("SvelteRegisterBlock",{block:o,id:J.name,type:"slot",source:"(20:2) <Modal on:close={() => messageFlow.cancel()} on:confirm={() => messageFlow.cancel()}>",ctx:l}),o}function K(l){let e,n;const r={c:function(){e=w("p"),n=v("Please wait while we load the profile..."),this.h()},l:function(o){e=b(o,"P",{class:!0});var s=y(e);n=E(s,"Please wait while we load the profile..."),s.forEach(m),this.h()},h:function(){k(e,"class","text-center"),F(e,P,16,4,744)},m:function(o,s){h(o,e,s),$(e,n)},d:function(o){o&&m(e)}};return g("SvelteRegisterBlock",{block:r,id:K.name,type:"slot",source:"(16:2) <Modal on:close={() => messageFlow.cancel()} on:confirm={() => messageFlow.cancel()}>",ctx:l}),r}function X(l){let e;const n={c:function(){e=v("Ok")},l:function(t){e=E(t,"Ok")},m:function(t,o){h(t,e,o)},d:function(t){t&&m(e)}};return g("SvelteRegisterBlock",{block:n,id:X.name,type:"slot",source:'(12:6) <PanelButton class=\\"mt-5\\" label=\\"Stake\\" on:click={() => messageFlow.acknownledgeError()}>',ctx:l}),n}function Z(l){let e,n,r,t,o,s=H(l[0].error)+"",a,u,f,i;f=new q({props:{class:"mt-5",label:"Stake",$$slots:{default:[X]},$$scope:{ctx:l}},$$inline:!0}),f.$on("click",l[1]);const _={c:function(){e=w("div"),n=w("h2"),r=v("An error happenned"),t=I(),o=w("p"),a=v(s),u=I(),O(f.$$.fragment),this.h()},l:function(c){e=b(c,"DIV",{class:!0});var p=y(e);n=b(p,"H2",{});var R=y(n);r=E(R,"An error happenned"),R.forEach(m),t=A(p),o=b(p,"P",{class:!0});var j=y(o);a=E(j,s),j.forEach(m),u=A(p),L(f.$$.fragment,p),p.forEach(m),this.h()},h:function(){F(n,P,9,6,365),k(o,"class","text-gray-300 mt-2 text-sm"),F(o,P,10,6,399),k(e,"class","text-center"),F(e,P,8,4,333)},m:function(c,p){h(c,e,p),$(e,n),$(n,r),$(e,t),$(e,o),$(o,a),$(e,u),N(f,e,null),i=!0},p:function(c,p){(!i||p&1)&&s!==(s=H(c[0].error)+"")&&C(a,s);const R={};p&128&&(R.$$scope={dirty:p,ctx:c}),f.$set(R)},i:function(c){i||(M(f.$$.fragment,c),i=!0)},o:function(c){B(f.$$.fragment,c),i=!1},d:function(c){c&&m(e),T(f)}};return g("SvelteRegisterBlock",{block:_,id:Z.name,type:"slot",source:"(8:2) <Modal on:close={() => messageFlow.acknownledgeError()}>",ctx:l}),_}function U(l){let e,n,r,t;const o=[Y,W,V],s=[];function a(f,i){return f[0].error?0:f[0].step==="LOADING"?1:f[0].step==="READY"?2:-1}~(e=a(l))&&(n=s[e]=o[e](l));const u={c:function(){n&&n.c(),r=D()},l:function(i){n&&n.l(i),r=D()},m:function(i,_){~e&&s[e].m(i,_),h(i,r,_),t=!0},p:function(i,[_]){let d=e;e=a(i),e===d?~e&&s[e].p(i,_):(n&&(re(),B(s[d],1,1,()=>{s[d]=null}),ce()),~e?(n=s[e],n?n.p(i,_):(n=s[e]=o[e](i),n.c()),M(n,1),n.m(r.parentNode,r)):n=null)},i:function(i){t||(M(n),t=!0)},o:function(i){B(n),t=!1},d:function(i){~e&&s[e].d(i),i&&m(r)}};return g("SvelteRegisterBlock",{block:u,id:U.name,type:"component",source:"",ctx:l}),u}function ue(l,e,n){let r;oe(S,"messageFlow"),ne(l,S,c=>n(0,r=c));let{$$slots:t={},$$scope:o}=e;se("MessageFlow",t,[]);const s=[];Object.keys(e).forEach(c=>{!~s.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<MessageFlow> was created with unknown prop '${c}'`)});const a=()=>S.acknownledgeError(),u=()=>S.acknownledgeError(),f=()=>S.cancel(),i=()=>S.cancel(),_=()=>S.cancel(),d=()=>S.cancel();return l.$capture_state=()=>({Modal:G,PanelButton:q,messageFlow:S,formatError:H,$messageFlow:r}),[r,a,u,f,i,_,d]}class he extends x{constructor(e){super(e);ee(this,e,ue,U,te,{}),g("SvelteRegisterComponent",{component:this,tagName:"MessageFlow",options:e,id:U.name})}}export{he as M,S as m};
//# sourceMappingURL=MessageFlow-30f15648.js.map
